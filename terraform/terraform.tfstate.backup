{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 143,
  "lineage": "7f4df2cf-54af-9770-ba69-0d0af535eea1",
  "outputs": {
    "http_api_endpoint": {
      "value": "https://7mh5tntjli.execute-api.ap-southeast-2.amazonaws.com/prod/send",
      "type": "string"
    },
    "websocket_api_endpoint": {
      "value": "wss://85j61tx7ci.execute-api.ap-southeast-2.amazonaws.com/prod",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "archive_file",
      "name": "handle_connect_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "5762d9051b25e43593ef403ddf529b3b70de4bf0",
            "output_base64sha256": "6H6sRPdenOWd10E5CniDZJC97SfFNW4SeXAGjZlxNTM=",
            "output_base64sha512": "/Fgbz2diTix4b8fo1WMF9em9np/zh339uuBdRnpTxGuEn/mBhXoU5914y5FbaAdygnhjqjggnASZXFZPHOvtCQ==",
            "output_file_mode": null,
            "output_md5": "0653edb9cef4d4be2c791bfa813ee93b",
            "output_path": "./handle_connect.zip",
            "output_sha": "5762d9051b25e43593ef403ddf529b3b70de4bf0",
            "output_sha256": "e87eac44f75e9ce59dd741390a78836490bded27c5356e127970068d99713533",
            "output_sha512": "fc581bcf67624e2c786fc7e8d56305f5e9bd9e9ff3877dfdbae05d467a53c46b849ff981857a14e7dd78cb915b680772827863aa38209c04995c564f1cebed09",
            "output_size": 559,
            "source": [
              {
                "content": "import boto3, os, json\nfrom boto3.dynamodb.conditions import Key\n\nddb = boto3.resource('dynamodb')\nlambda_client = boto3.client('lambda')\nconnections_table = ddb.Table(os.environ['CONNECTIONS_TABLE'])\n\ndef lambda_handler(event, context):\n    connection_id = event['requestContext']['connectionId']\n    print(f\"New connection: {connection_id}\")\n    try:\n        connections_table.put_item(Item={'connectionId': connection_id})\n    except Exception as e:\n        print(f\"Failed to save connection: {e}\")\n        return {'statusCode': 500, 'body': 'DB Error'}\n\n    try:\n        lambda_client.invoke(\n            FunctionName=os.environ['ASYNC_CONNECT_WORKER'],\n            InvocationType='Event',\n            Payload=json.dumps({'connectionId': connection_id})\n        )\n    except Exception as e:\n        print(f\"Failed to invoke async worker: {e}\")\n    return {'statusCode': 200}\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "handle_disconnect_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "297a3818a911d132c9d522deb4345bf958c42472",
            "output_base64sha256": "R0V7LygAQbNJYdQZodVcg9O+E+caPCdWiUgYyu5Q5Os=",
            "output_base64sha512": "j7t5BKMytTGw92HLtmQ8b+VIGoF2hEowCEiMjDnh0vTEwSMq2g+y+K21Kfq2A4bk5rLKP9G/p1Y00RXXzz8eZg==",
            "output_file_mode": null,
            "output_md5": "ba449e9c2a963cb32b7020295a08f3b8",
            "output_path": "./handle_disconnect.zip",
            "output_sha": "297a3818a911d132c9d522deb4345bf958c42472",
            "output_sha256": "47457b2f280041b34961d419a1d55c83d3be13e71a3c2756894818caee50e4eb",
            "output_sha512": "8fbb7904a332b531b0f761cbb6643c6fe5481a8176844a3008488c8c39e1d2f4c4c1232ada0fb2f8adb529fab60386e4e6b2ca3fd1bfa75634d115d7cf3f1e66",
            "output_size": 332,
            "source": [
              {
                "content": "import boto3\nimport os\ndynamodb = boto3.resource('dynamodb')\ntable = dynamodb.Table(os.environ['TABLE_NAME'])\ndef lambda_handler(event, context):\n    connectionId = event['requestContext']['connectionId']\n    table.delete_item(Key={'connectionId': connectionId})\n    return {'statusCode': 200}\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "handle_send_message_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "971ca3b62ee575ce5ace1eb9daad1465684d0da3",
            "output_base64sha256": "olu34jw/b7U+Hr1p9G2BSlO1lTmKAEmd3Adf87cLkZw=",
            "output_base64sha512": "yX99h6ZjZv8mtU2+JdJNS9WJXVtlD20aX+v7bMUpQdsDTKeKf8bmbeMME8X9n1VzY0KR95GqKy1M75lCb1XkWQ==",
            "output_file_mode": null,
            "output_md5": "09e81d71dff8e1b13641590e43a2b5c4",
            "output_path": "./handle_send_message.zip",
            "output_sha": "971ca3b62ee575ce5ace1eb9daad1465684d0da3",
            "output_sha256": "a25bb7e23c3f6fb53e1ebd69f46d814a53b595398a00499ddc075ff3b70b919c",
            "output_sha512": "c97f7d87a66366ff26b54dbe25d24d4bd5895d5b650f6d1a5febfb6cc52941db034ca78a7fc6e66de30c13c5fd9f5573634291f791aa2b2d4cef99426f55e459",
            "output_size": 1059,
            "source": [
              {
                "content": "import boto3\nimport os\nimport json\nimport time\nfrom boto3.dynamodb.conditions import Key\n\nddb = boto3.resource('dynamodb')\nconn_table = ddb.Table(os.environ['CONNECTIONS_TABLE'])\nmsg_table = ddb.Table(os.environ['MESSAGES_TABLE'])\n\ngateway_url = f\"https://{os.environ['API_GATEWAY_ID']}.execute-api.{os.environ['CURR_AWS_REGION']}.amazonaws.com/{os.environ['STAGE']}\"\napigw_client = boto3.client('apigatewaymanagementapi', endpoint_url=gateway_url)\nprint(f\"API Gateway endpoint URL: {gateway_url}\")\n\ndef lambda_handler(event, context):\n    try:\n        # Read body as raw string\n        message = event.get('body', '')\n        if not message:\n            return {'statusCode': 400, 'body': 'Empty message body'}\n    except Exception as e:\n        return {'statusCode': 400, 'body': f\"Error reading message: {str(e)}\"}\n\n    timestamp = int(time.time() * 1000)\n    msg_item = {\n        'partitionKey': 'global',\n        'timestamp': timestamp,\n        'message': message  # Store as-is\n    }\n\n    print(\"Storing message:\", msg_item)\n\n    try:\n        msg_table.put_item(Item=msg_item)\n    except Exception as e:\n        print(\"Error writing to DynamoDB:\", str(e))\n        return {'statusCode': 500, 'body': 'Failed to write message'}\n\n    # Trim to latest 10 messages\n    messages = msg_table.query(\n        KeyConditionExpression=Key('partitionKey').eq('global'),\n        ScanIndexForward=True  # oldest first\n    )['Items']\n\n    if len(messages) \u003e 10:\n        for old in messages[:-10]:\n            msg_table.delete_item(\n                Key={\n                    'partitionKey': 'global',\n                    'timestamp': old['timestamp']\n                }\n            )\n\n    # Send to all connections\n    connections = conn_table.scan(ProjectionExpression='connectionId')['Items']\n    for connection in connections:\n        try:\n            print(f\"Send message to {connection['connectionId']}\")\n            apigw_client.post_to_connection(\n                ConnectionId=connection['connectionId'],\n                Data=message.encode('utf-8')\n            )\n        except apigw_client.exceptions.GoneException:\n            conn_table.delete_item(Key={'connectionId': connection['connectionId']})\n\n    return {'statusCode': 200}\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "archive_file",
      "name": "post_connect_worker_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "6c04e1fd4cdeab29a58d9b68dd163c518769deb0",
            "output_base64sha256": "p9Geh3eYxb2vsMF//K8Gf52nzTXfBlNNCFQyf2wfWy4=",
            "output_base64sha512": "fbG9a2YLZTQ1vXANNghXI28HIm84RHTKZxD04fUVWnS1Vvio9N7LeEWlTaN7bXViWPHx4HPuBxBjGcwMSXGV1A==",
            "output_file_mode": null,
            "output_md5": "af115eaa2343ee8be013f6e2e1b4963f",
            "output_path": "./post_connect_worker.zip",
            "output_sha": "6c04e1fd4cdeab29a58d9b68dd163c518769deb0",
            "output_sha256": "a7d19e877798c5bdafb0c17ffcaf067f9da7cd35df06534d0854327f6c1f5b2e",
            "output_sha512": "7db1bd6b660b653435bd700d360857236f07226f384474ca6710f4e1f5155a74b556f8a8f4decb7845a54da37b6d756258f1f1e073ee07106319cc0c497195d4",
            "output_size": 705,
            "source": [
              {
                "content": "import boto3, os, json, time\nfrom boto3.dynamodb.conditions import Key\n\ndef lambda_handler(event, context):\n    connection_id = event.get('connectionId')\n    print(f\"Async PostConnectWorker: {connection_id}\")\n\n    ddb = boto3.resource('dynamodb')\n    msg_table = ddb.Table(os.environ['MESSAGES_TABLE'])\n\n    gateway_url = f\"https://{os.environ['API_GATEWAY_ID']}.execute-api.{os.environ['CURR_AWS_REGION']}.amazonaws.com/{os.environ['STAGE']}\"\n    apigw = boto3.client('apigatewaymanagementapi', endpoint_url=gateway_url)\n\n    try:\n        response = msg_table.query(\n            KeyConditionExpression=Key('partitionKey').eq('global'),\n            ScanIndexForward=False,\n            Limit=10\n        )\n        messages = response.get('Items', [])[::-1]\n        for msg in messages:\n            apigw.post_to_connection(\n                ConnectionId=connection_id,\n                Data=msg['message'].encode('utf-8')\n            )\n    except apigw.exceptions.GoneException:\n        print(f\"Connection {connection_id} is gone.\")\n    except Exception as e:\n        print(f\"Error sending: {e}\")\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "819351093183",
            "arn": "arn:aws:iam::819351093183:user/dev",
            "id": "819351093183",
            "user_id": "AIDA35RJBP674PMFNZRT6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "allow_invoke_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "274546231",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"lambda:InvokeFunction\",\n      \"Resource\": \"arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"lambda:InvokeFunction\",\"Resource\":\"arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "lambda:InvokeFunction"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "apigw_log_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "3546645223",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "apigw_logs_assume",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2699642182",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"apigateway.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "apigateway.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_assume",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2690255455",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "lambda_policy_doc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "106445495",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"DynamoPermissionsConnections\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:Scan\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:DeleteItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:819351093183:table/WebSocketConnections\"\n    },\n    {\n      \"Sid\": \"ManageConnections\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"execute-api:ManageConnections\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"MessagesTable\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"dynamodb:Query\",\n        \"dynamodb:PutItem\",\n        \"dynamodb:DeleteItem\"\n      ],\n      \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:819351093183:table/AnalysisMessages\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DynamoPermissionsConnections\",\"Effect\":\"Allow\",\"Action\":[\"dynamodb:Scan\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\"],\"Resource\":\"arn:aws:dynamodb:ap-southeast-2:819351093183:table/WebSocketConnections\"},{\"Sid\":\"ManageConnections\",\"Effect\":\"Allow\",\"Action\":\"execute-api:ManageConnections\",\"Resource\":\"*\"},{\"Sid\":\"MessagesTable\",\"Effect\":\"Allow\",\"Action\":[\"dynamodb:Query\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\"],\"Resource\":\"arn:aws:dynamodb:ap-southeast-2:819351093183:table/AnalysisMessages\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "dynamodb:DeleteItem",
                  "dynamodb:PutItem",
                  "dynamodb:Scan"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:ap-southeast-2:819351093183:table/WebSocketConnections"
                ],
                "sid": "DynamoPermissionsConnections"
              },
              {
                "actions": [
                  "execute-api:ManageConnections"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "ManageConnections"
              },
              {
                "actions": [
                  "dynamodb:DeleteItem",
                  "dynamodb:PutItem",
                  "dynamodb:Query"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:dynamodb:ap-southeast-2:819351093183:table/AnalysisMessages"
                ],
                "sid": "MessagesTable"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_api",
      "name": "http_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_endpoint": "https://7mh5tntjli.execute-api.ap-southeast-2.amazonaws.com",
            "api_key_selection_expression": "$request.header.x-api-key",
            "arn": "arn:aws:apigateway:ap-southeast-2::/apis/7mh5tntjli",
            "body": null,
            "cors_configuration": [],
            "credentials_arn": null,
            "description": "",
            "disable_execute_api_endpoint": false,
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:7mh5tntjli",
            "fail_on_warnings": null,
            "id": "7mh5tntjli",
            "ip_address_type": "ipv4",
            "name": "HttpPushApi",
            "protocol_type": "HTTP",
            "route_key": null,
            "route_selection_expression": "$request.method $request.path",
            "tags": null,
            "tags_all": {},
            "target": null,
            "version": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_api",
      "name": "websocket_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_endpoint": "wss://85j61tx7ci.execute-api.ap-southeast-2.amazonaws.com",
            "api_key_selection_expression": "$request.header.x-api-key",
            "arn": "arn:aws:apigateway:ap-southeast-2::/apis/85j61tx7ci",
            "body": null,
            "cors_configuration": [],
            "credentials_arn": null,
            "description": "",
            "disable_execute_api_endpoint": false,
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:85j61tx7ci",
            "fail_on_warnings": null,
            "id": "85j61tx7ci",
            "ip_address_type": "ipv4",
            "name": "WebSocketChatApi",
            "protocol_type": "WEBSOCKET",
            "route_key": null,
            "route_selection_expression": "$request.body.action",
            "tags": null,
            "tags_all": {},
            "target": null,
            "version": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_deployment",
      "name": "ws_deployment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "auto_deployed": false,
            "description": "",
            "id": "r95kdl",
            "triggers": {
              "routes_hash": "cc67303487e2f4c817fc5147e5619231886da552"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_integration.ws_connect_integration",
            "aws_apigatewayv2_integration.ws_disconnect_integration",
            "aws_apigatewayv2_integration.ws_send_integration",
            "aws_apigatewayv2_route.ws_connect_route",
            "aws_apigatewayv2_route.ws_disconnect_route",
            "aws_apigatewayv2_route.ws_send_route",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_connect",
            "aws_lambda_function.handle_disconnect",
            "aws_lambda_function.handle_send_message",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.handle_disconnect_zip",
            "data.archive_file.handle_send_message_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "http_send_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "7mh5tntjli",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "ng54j84",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction/invocations",
            "passthrough_behavior": "",
            "payload_format_version": "2.0",
            "request_parameters": null,
            "request_templates": null,
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 30000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http_api",
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_send_message",
            "data.archive_file.handle_send_message_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "ws_connect_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "3lx936k",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleConnectFunction/invocations",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "payload_format_version": "1.0",
            "request_parameters": null,
            "request_templates": null,
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 29000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_connect",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "ws_disconnect_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "ws9zt8c",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleDisconnectFunction/invocations",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "payload_format_version": "1.0",
            "request_parameters": null,
            "request_templates": null,
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 29000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_disconnect",
            "data.archive_file.handle_disconnect_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_integration",
      "name": "ws_send_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling_strategy": "",
            "credentials_arn": "",
            "description": "",
            "id": "0k35qsf",
            "integration_method": "POST",
            "integration_response_selection_expression": "",
            "integration_subtype": "",
            "integration_type": "AWS_PROXY",
            "integration_uri": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction/invocations",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "payload_format_version": "1.0",
            "request_parameters": null,
            "request_templates": null,
            "response_parameters": [],
            "template_selection_expression": "",
            "timeout_milliseconds": 29000,
            "tls_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_send_message",
            "data.archive_file.handle_send_message_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "http_send_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "7mh5tntjli",
            "api_key_required": false,
            "authorization_scopes": null,
            "authorization_type": "NONE",
            "authorizer_id": "",
            "id": "tapzw65",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": null,
            "request_parameter": [],
            "route_key": "POST /send",
            "route_response_selection_expression": "",
            "target": "integrations/ng54j84"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http_api",
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_integration.http_send_integration",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_send_message",
            "data.archive_file.handle_send_message_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "ws_connect_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "api_key_required": false,
            "authorization_scopes": null,
            "authorization_type": "NONE",
            "authorizer_id": "",
            "id": "279s1xb",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": null,
            "request_parameter": [],
            "route_key": "$connect",
            "route_response_selection_expression": "",
            "target": "integrations/3lx936k"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_integration.ws_connect_integration",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_connect",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "ws_disconnect_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "api_key_required": false,
            "authorization_scopes": null,
            "authorization_type": "NONE",
            "authorizer_id": "",
            "id": "mn4vwdn",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": null,
            "request_parameter": [],
            "route_key": "$disconnect",
            "route_response_selection_expression": "",
            "target": "integrations/ws9zt8c"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_integration.ws_disconnect_integration",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_disconnect",
            "data.archive_file.handle_disconnect_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_route",
      "name": "ws_send_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "85j61tx7ci",
            "api_key_required": false,
            "authorization_scopes": null,
            "authorization_type": "NONE",
            "authorizer_id": "",
            "id": "y8v0if9",
            "model_selection_expression": "",
            "operation_name": "",
            "request_models": null,
            "request_parameter": [],
            "route_key": "sendmessage",
            "route_response_selection_expression": "",
            "target": "integrations/0k35qsf"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_integration.ws_send_integration",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_send_message",
            "data.archive_file.handle_send_message_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_stage",
      "name": "http_stage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [
              {
                "destination_arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/apigateway/HttpPushApi-prod",
                "format": "{\"requestId\":\"$context.requestId\",\"routeKey\":\"$context.routeKey\",\"status\":\"$context.status\"}"
              }
            ],
            "api_id": "7mh5tntjli",
            "arn": "arn:aws:apigateway:ap-southeast-2::/apis/7mh5tntjli/stages/prod",
            "auto_deploy": true,
            "client_certificate_id": "",
            "default_route_settings": [
              {
                "data_trace_enabled": false,
                "detailed_metrics_enabled": false,
                "logging_level": "",
                "throttling_burst_limit": 0,
                "throttling_rate_limit": 0
              }
            ],
            "deployment_id": "",
            "description": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:7mh5tntjli/prod",
            "id": "prod",
            "invoke_url": "https://7mh5tntjli.execute-api.ap-southeast-2.amazonaws.com/prod",
            "name": "prod",
            "route_settings": [],
            "stage_variables": null,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http_api",
            "aws_cloudwatch_log_group.http_api_logs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_apigatewayv2_stage",
      "name": "ws_stage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [
              {
                "destination_arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/apigateway/85j61tx7ci",
                "format": "{\"requestId\":\"$context.requestId\",\"routeKey\":\"$context.routeKey\",\"status\":\"$context.status\"}"
              }
            ],
            "api_id": "85j61tx7ci",
            "arn": "arn:aws:apigateway:ap-southeast-2::/apis/85j61tx7ci/stages/prod",
            "auto_deploy": true,
            "client_certificate_id": "",
            "default_route_settings": [
              {
                "data_trace_enabled": true,
                "detailed_metrics_enabled": false,
                "logging_level": "INFO",
                "throttling_burst_limit": 0,
                "throttling_rate_limit": 0
              }
            ],
            "deployment_id": "r95kdl",
            "description": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:85j61tx7ci/prod",
            "id": "prod",
            "invoke_url": "wss://85j61tx7ci.execute-api.ap-southeast-2.amazonaws.com/prod",
            "name": "prod",
            "route_settings": [],
            "stage_variables": null,
            "tags": {
              "Environment": "prod"
            },
            "tags_all": {
              "Environment": "prod"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_apigatewayv2_deployment.ws_deployment",
            "aws_apigatewayv2_integration.ws_connect_integration",
            "aws_apigatewayv2_integration.ws_disconnect_integration",
            "aws_apigatewayv2_integration.ws_send_integration",
            "aws_apigatewayv2_route.ws_connect_route",
            "aws_apigatewayv2_route.ws_disconnect_route",
            "aws_apigatewayv2_route.ws_send_route",
            "aws_cloudwatch_log_group.websocket_api_logs",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_connect",
            "aws_lambda_function.handle_disconnect",
            "aws_lambda_function.handle_send_message",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.handle_disconnect_zip",
            "data.archive_file.handle_send_message_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "connect_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/lambda/HandleConnectFunction",
            "id": "/aws/lambda/HandleConnectFunction",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/HandleConnectFunction",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "disconnect_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/lambda/HandleDisconnectFunction",
            "id": "/aws/lambda/HandleDisconnectFunction",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/HandleDisconnectFunction",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "http_api_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/apigateway/HttpPushApi-prod",
            "id": "/aws/apigateway/HttpPushApi-prod",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/apigateway/HttpPushApi-prod",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "post_connect_worker_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/lambda/PostConnectWorkerFunction",
            "id": "/aws/lambda/PostConnectWorkerFunction",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/PostConnectWorkerFunction",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "send_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/lambda/HandleSendMessageFunction",
            "id": "/aws/lambda/HandleSendMessageFunction",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/HandleSendMessageFunction",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "websocket_api_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:819351093183:log-group:/aws/apigateway/85j61tx7ci",
            "id": "/aws/apigateway/85j61tx7ci",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/apigateway/85j61tx7ci",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "analysis_messages",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:ap-southeast-2:819351093183:table/AnalysisMessages",
            "attribute": [
              {
                "name": "partitionKey",
                "type": "S"
              },
              {
                "name": "timestamp",
                "type": "N"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "partitionKey",
            "id": "AnalysisMessages",
            "import_table": [],
            "local_secondary_index": [],
            "name": "AnalysisMessages",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false,
                "recovery_period_in_days": 0
              }
            ],
            "range_key": "timestamp",
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Name": "AnalysisMessages"
            },
            "tags_all": {
              "Name": "AnalysisMessages"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "websocket_connections",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:ap-southeast-2:819351093183:table/WebSocketConnections",
            "attribute": [
              {
                "name": "connectionId",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "connectionId",
            "id": "WebSocketConnections",
            "import_table": [],
            "local_secondary_index": [],
            "name": "WebSocketConnections",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false,
                "recovery_period_in_days": 0
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Name": "WebSocketConnections"
            },
            "tags_all": {
              "Name": "WebSocketConnections"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "allow_async_invoke_worker_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::819351093183:policy/AllowAsyncInvokeWorker",
            "attachment_count": 0,
            "description": "",
            "id": "arn:aws:iam::819351093183:policy/AllowAsyncInvokeWorker",
            "name": "AllowAsyncInvokeWorker",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"lambda:InvokeFunction\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA35RJBP677XYGXPJCF",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.allow_invoke_worker",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "apigw_cloudwatch_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::819351093183:role/ApiGatewayWebSocketLoggingRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-08-06T13:59:49Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ApiGatewayWebSocketLoggingRole",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "ApiGatewayWebSocketLoggingRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA35RJBP673Q7MBSW6O"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.apigw_logs_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_execution",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::819351093183:role/WebSocketLambdaExecutionRole",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-08-06T13:59:48Z",
            "description": "",
            "force_detach_policies": false,
            "id": "WebSocketLambdaExecutionRole",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "WebSocketLambdaExecutionRole",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA35RJBP67VS5ZXBRO2"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "apigw_log_policy_attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ApiGatewayWebSocketLoggingRole:ApiGatewayLoggingPolicy",
            "name": "ApiGatewayLoggingPolicy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "ApiGatewayWebSocketLoggingRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.apigw_cloudwatch_role",
            "data.aws_iam_policy_document.apigw_log_policy",
            "data.aws_iam_policy_document.apigw_logs_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_inline_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "WebSocketLambdaExecutionRole:WebSocketLambdaPolicy",
            "name": "WebSocketLambdaPolicy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"dynamodb:Scan\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:ap-southeast-2:819351093183:table/WebSocketConnections\",\"Sid\":\"DynamoPermissionsConnections\"},{\"Action\":\"execute-api:ManageConnections\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"ManageConnections\"},{\"Action\":[\"dynamodb:Query\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:ap-southeast-2:819351093183:table/AnalysisMessages\",\"Sid\":\"MessagesTable\"}]}",
            "role": "WebSocketLambdaExecutionRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "data.aws_iam_policy_document.lambda_assume",
            "data.aws_iam_policy_document.lambda_policy_doc"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "attach_invoke_worker_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "WebSocketLambdaExecutionRole-20250806140005871100000002",
            "policy_arn": "arn:aws:iam::819351093183:policy/AllowAsyncInvokeWorker",
            "role": "WebSocketLambdaExecutionRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_iam_policy.allow_async_invoke_worker_policy",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.allow_invoke_worker",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_basic_exec",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "WebSocketLambdaExecutionRole-20250806135950348600000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
            "role": "WebSocketLambdaExecutionRole"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.lambda_execution",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "handle_connect",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleConnectFunction",
            "code_sha256": "6H6sRPdenOWd10E5CniDZJC97SfFNW4SeXAGjZlxNTM=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "API_GATEWAY_ID": "85j61tx7ci",
                  "ASYNC_CONNECT_WORKER": "PostConnectWorkerFunction",
                  "CONNECTIONS_TABLE": "WebSocketConnections",
                  "CURR_AWS_REGION": "ap-southeast-2",
                  "MESSAGES_TABLE": "AnalysisMessages",
                  "STAGE": "prod"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./handle_connect.zip",
            "function_name": "HandleConnectFunction",
            "handler": "index.lambda_handler",
            "id": "HandleConnectFunction",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleConnectFunction/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-08-06T14:00:16.264+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/HandleConnectFunction",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleConnectFunction:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleConnectFunction:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::819351093183:role/WebSocketLambdaExecutionRole",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "6H6sRPdenOWd10E5CniDZJC97SfFNW4SeXAGjZlxNTM=",
            "source_code_size": 559,
            "tags": null,
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "handle_disconnect",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleDisconnectFunction",
            "code_sha256": "R0V7LygAQbNJYdQZodVcg9O+E+caPCdWiUgYyu5Q5Os=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "TABLE_NAME": "WebSocketConnections"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./handle_disconnect.zip",
            "function_name": "HandleDisconnectFunction",
            "handler": "index.lambda_handler",
            "id": "HandleDisconnectFunction",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleDisconnectFunction/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-08-06T14:00:04.805+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/HandleDisconnectFunction",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleDisconnectFunction:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleDisconnectFunction:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::819351093183:role/WebSocketLambdaExecutionRole",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "R0V7LygAQbNJYdQZodVcg9O+E+caPCdWiUgYyu5Q5Os=",
            "source_code_size": 332,
            "tags": null,
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "data.archive_file.handle_disconnect_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "handle_send_message",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction",
            "code_sha256": "olu34jw/b7U+Hr1p9G2BSlO1lTmKAEmd3Adf87cLkZw=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "API_GATEWAY_ID": "85j61tx7ci",
                  "CONNECTIONS_TABLE": "WebSocketConnections",
                  "CURR_AWS_REGION": "ap-southeast-2",
                  "MESSAGES_TABLE": "AnalysisMessages",
                  "STAGE": "prod"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./handle_send_message.zip",
            "function_name": "HandleSendMessageFunction",
            "handler": "index.lambda_handler",
            "id": "HandleSendMessageFunction",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-08-06T14:00:10.535+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/HandleSendMessageFunction",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:HandleSendMessageFunction:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::819351093183:role/WebSocketLambdaExecutionRole",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "olu34jw/b7U+Hr1p9G2BSlO1lTmKAEmd3Adf87cLkZw=",
            "source_code_size": 1059,
            "tags": null,
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "data.archive_file.handle_send_message_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "post_connect_worker",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction",
            "code_sha256": "p9Geh3eYxb2vsMF//K8Gf52nzTXfBlNNCFQyf2wfWy4=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "API_GATEWAY_ID": "85j61tx7ci",
                  "CURR_AWS_REGION": "ap-southeast-2",
                  "MESSAGES_TABLE": "AnalysisMessages",
                  "STAGE": "prod"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./post_connect_worker.zip",
            "function_name": "PostConnectWorkerFunction",
            "handler": "index.lambda_handler",
            "id": "PostConnectWorkerFunction",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-08-06T13:59:58.988+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/PostConnectWorkerFunction",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:819351093183:function:PostConnectWorkerFunction:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::819351093183:role/WebSocketLambdaExecutionRole",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "p9Geh3eYxb2vsMF//K8Gf52nzTXfBlNNCFQyf2wfWy4=",
            "source_code_size": 705,
            "tags": null,
            "tags_all": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_iam_role.lambda_execution",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_apigw_invoke_connect",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "HandleConnectFunction",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeConnect",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:85j61tx7ci/*/$connect",
            "statement_id": "AllowAPIGWInvokeConnect",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_connect",
            "aws_lambda_function.post_connect_worker",
            "data.archive_file.handle_connect_zip",
            "data.archive_file.post_connect_worker_zip",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_apigw_invoke_disconnect",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "HandleDisconnectFunction",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeDisconnect",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:85j61tx7ci/*/$disconnect",
            "statement_id": "AllowAPIGWInvokeDisconnect",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_disconnect",
            "data.archive_file.handle_disconnect_zip",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_apigw_invoke_send",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "HandleSendMessageFunction",
            "function_url_auth_type": null,
            "id": "AllowAPIGWInvokeSend",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:ap-southeast-2:819351093183:7mh5tntjli/*/POST/send",
            "statement_id": "AllowAPIGWInvokeSend",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_apigatewayv2_api.http_api",
            "aws_apigatewayv2_api.websocket_api",
            "aws_dynamodb_table.analysis_messages",
            "aws_dynamodb_table.websocket_connections",
            "aws_iam_role.lambda_execution",
            "aws_lambda_function.handle_send_message",
            "data.archive_file.handle_send_message_zip",
            "data.aws_caller_identity.current",
            "data.aws_iam_policy_document.lambda_assume"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
