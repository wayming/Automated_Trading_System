<!DOCTYPE html>
<html>
<head><title>WebSocket Demo</title></head>
<body>
  <h3>WebSocket Messages</h3>
  <div id="messages" style="border:1px solid #ccc; height:300px; overflow:auto;"></div>
  <input id="input" type="text" placeholder="Type message"/>
  <button onclick="sendMessage()">Send</button>

  <script>
    const ws = new WebSocket("wss://kxajy0apme.execute-api.ap-southeast-2.amazonaws.com/prod");

    ws.onopen = () => console.log("Connected");
    ws.onclose = () => console.log("Disconnected");
    ws.onerror = e => console.error("Error:", e);

    ws.onmessage = event => {
      const msgDiv = document.getElementById("messages");
      const p = document.createElement("p");
      p.textContent = event.data;
      msgDiv.appendChild(p);
      msgDiv.scrollTop = msgDiv.scrollHeight;
    };

    function sendMessage() {
      const input = document.getElementById("input");
      const msg = input.value.trim();
      if (msg) {
        ws.send(JSON.stringify({ action: "sendmessage", message: msg }));
        input.value = "";
      }
    }
  </script>
</body>
</html>
